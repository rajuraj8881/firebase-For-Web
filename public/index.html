<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <h1>Cloud Firestore</h1>
  <div class="container">
    <input type="text" id="name">
    <button id="addDataBtn">Add Data</button>
  </div>

  <div class="container">
    <p id="result"></p>
  </div>

  <script src="https://www.gstatic.com/firebasejs/8.8.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.8.0/firebase-firestore.js"></script>
  <script>

    var firebaseConfig = {
      apiKey: "AIzaSyBAFI5pwgumF_KKpgZTDabG0Z3eUmBll4o",
      authDomain: "fir-hosting-b4ddb.firebaseapp.com",
      projectId: "fir-hosting-b4ddb",
      storageBucket: "fir-hosting-b4ddb.appspot.com",
      messagingSenderId: "726207258592",
      appId: "1:726207258592:web:cfcc1e034efff054799585",
      measurementId: "G-ECLSPSRGL1"
    };

    firebase.initializeApp(firebaseConfig);

    document.getElementById('addDataBtn').addEventListener('click', addData)

    function addData() {
      let nameData = document.getElementById('name').value;
      let dataLoad = {
        name: nameData
      }

      firebase.firestore().collection('edata').add(dataLoad).then(doc => {
        console.log(doc.id)
      }).catch(err => console.log(err))

      // firebase.firestore().collection('edata').doc('doc_' + nameData).set(dataLoad).then(doc => {
      //   console.log('success');
      // }).catch(error => console.log(error));

    }

    function updateData() {
      let dataUpdate = {
        name: "New Data Update"
      }
      firebase.firestore().collection('edata').doc('bQ8G1DyEfcv3BNRifMmE').update(dataUpdate).then(() => {
        alert('data uodated successfully');
      }).catch(error => console.log(error))
    }

    // updateData();

    function deleteData() {
      firebase.firestore().collection('edata').doc('Bue3BqBv0429UH3HCRBD').delete()
        .then(() => alert('Data remove successfully'))
        .catch(error => console.log(error))
    }

    // deleteData();

    function readData() {
      firebase.firestore().collection('edata').get().then(docs => {
        docs.forEach(doc => {
          console.log(doc.data());
          console.log(doc.id);
          document.getElementById('result').innerHTML += "<p>" + doc.data().name + "</p>"
        });
      })
    }

    readData();

  </script>
</body>

</html>